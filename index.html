<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IOI Library | Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="auth-wrapper p-3">
        <div class="auth-card">
            <h2 class="text-center fw-bold text-primary mb-4">IOI Library</h2>
            
            <ul class="nav nav-pills nav-fill mb-4">
                <li class="nav-item"><button class="nav-link active" id="lTab" onclick="switchTab('login')">Login</button></li>
                <li class="nav-item"><button class="nav-link" id="sTab" onclick="switchTab('signup')">Signup</button></li>
            </ul>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="mb-3"><label class="small fw-bold">Email</label><input type="email" id="lEmail" class="form-control" required></div>
                <div class="mb-3"><label class="small fw-bold">Password</label><input type="password" id="lPass" class="form-control" required></div>
                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>

            <form id="signupForm" onsubmit="handleSignup(event)" style="display:none;">
                <div class="mb-2"><label class="small fw-bold">Name</label><input type="text" id="name" class="form-control" required></div>
                <div class="mb-2"><label class="small fw-bold">Department</label>
                    <select id="dept" class="form-select"><option value="SOT">SOT (Tech)</option><option value="SOH">SOH (Healthcare)</option></select>
                </div>
                <div class="mb-2"><label class="small fw-bold">Enrollment No.</label><input type="text" id="enroll" class="form-control" required></div>
                <div class="mb-2"><label class="small fw-bold">Email</label><input type="email" id="email" class="form-control" required></div>
                <div class="mb-3"><label class="small fw-bold">Password</label><input type="password" id="pass" class="form-control" required></div>
                <button type="submit" class="btn btn-success w-100">Sign Up</button>
            </form>
        </div>
    </div>

    <script>
        function switchTab(t) {
            document.getElementById('loginForm').style.display = t === 'login' ? 'block' : 'none';
            document.getElementById('signupForm').style.display = t === 'signup' ? 'block' : 'none';
            document.getElementById('lTab').classList.toggle('active', t === 'login');
            document.getElementById('sTab').classList.toggle('active', t === 'signup');
        }

        function handleSignup(e) {
            e.preventDefault();
            const user = {
                name: document.getElementById('name').value,
                dept: document.getElementById('dept').value,
                enroll: document.getElementById('enroll').value,
                email: document.getElementById('email').value,
                pass: document.getElementById('pass').value
            };
            localStorage.setItem(user.email, JSON.stringify(user));
            alert("Signup successful!");
            switchTab('login');
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('lEmail').value;
            const pass = document.getElementById('lPass').value;
            const user = JSON.parse(localStorage.getItem(email));

            if (user && user.pass === pass) {
                sessionStorage.setItem('activeUser', JSON.stringify(user));
                window.location.href = "dasboard.html"; // Redirects to Home Page
            } else {
                alert("Invalid Credentials");
            }
        }
    </script>
</body>
</html>
